version: "3.1"

stories:

- story: tell time
  steps:
  - intent: user_ask_time
  - action: action_set_name_slots
  - action: action_log_slots
  - action: action_set_time_of_day
  - action: utter_tell_time

- story: tell name
  steps:
  - intent: user_ask_name
  - action: action_set_name_slots
  - action: action_log_slots
  - action: utter_tell_name

- story: say goodbye
  steps:
  - intent: user_goodbye
  - action: action_set_name_slots
  - action: action_log_slots
  - action: utter_goodbye

- story: personalized greeting
  steps:
  - intent: user_greet
  - action: action_set_name_slots
  - action: action_set_part_of_day
  - action: action_log_slots
  - action: utter_greet_personalized

- story: enrollment triggered - ask name after affirm or deny
  steps:
  - intent: trigger_enrollment
  - action: utter_ask_familar
  - or:
    - intent: affirm  # Path 1: User says yes
    - intent: deny   # Path 2: User says no
  - action: utter_ask_full_name # The common action after either path

- story: enrollment triggered - user provides name immediately
  steps:
  - intent: trigger_enrollment
  - action: utter_ask_familar
  - intent: provide_name  # User says "Yes, I'm John Smith"
  - action: name_collection_form  # Skip asking, go straight to form
  - active_loop: name_collection_form
